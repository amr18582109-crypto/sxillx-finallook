@import './designTokens.css';

/* COMPONENT PRIMITIVES */

/* Interactive system (consistent hover/focus across project) */
:root {
  --accent-color: var(--color-primary-500);
  --accent-color-rgba: 102,126,234; /* used for focus shadows (primary) */
  /* secondary/accent feedback color (distinct from primary) */
  --accent-secondary: var(--color-secondary-500);
  --accent-secondary-rgba: 118,75,162; /* rgb for #764ba2 */
  --duration-accent: 250ms;
}

/* reusable interactive helper */
.interactive {
  transition: background-color var(--duration-base) var(--ease-in-out),
              color var(--duration-base) var(--ease-in-out),
              transform var(--duration-base) var(--ease-in-out),
              box-shadow var(--duration-base) var(--ease-in-out),
              opacity var(--duration-base) var(--ease-in-out);
  will-change: transform, box-shadow, opacity;
}

/* apply to common interactive primitives */
button, .btn-base, .btn, a, .card, .nav-link, input, textarea, select {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* Buttons: hover & focus */
.btn-base, .btn {
  cursor: pointer;
}
.btn-base:hover, .btn:hover {
  filter: brightness(0.98);
  transform: translateY(-2px);
  /* add a clear accent glow on hover using the secondary accent color */
  box-shadow: 0 8px 30px rgba(var(--accent-secondary-rgba),0.06);
}
.btn-base:focus, .btn:focus, .btn-base:focus-visible, .btn:focus-visible {
  outline: none;
  box-shadow: 0 10px 30px rgba(var(--accent-secondary-rgba),0.12), 0 0 0 4px rgba(var(--accent-secondary-rgba),0.08);
  border-radius: var(--radius-lg);
}

.btn-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-6);
  font-size: var(--text-base);
  font-weight: var(--font-semibold);
  line-height: var(--leading-tight);
  border-radius: var(--radius-lg);
  border: none;
  cursor: pointer;
  transition: all var(--duration-base) var(--ease-in-out);
  white-space: nowrap;
  user-select: none;
}

.btn-primary {
  background: var(--gradient-primary);
  color: var(--text-inverse);
  box-shadow: var(--shadow-primary);
}
.btn-primary:hover { background: var(--gradient-primary-hover); transform: translateY(-2px); box-shadow: 0 12px 24px -6px rgba(102,126,234,0.5); }
.btn-primary:active { transform: translateY(0); }

.btn-secondary { background: transparent; color: var(--color-primary-600); border: 2px solid var(--color-primary-500); }
.btn-secondary:hover { background: var(--color-primary-50); border-color: var(--color-primary-600); }
.btn-ghost { background: transparent; color: var(--text-secondary); }
.btn-ghost:hover { background: var(--bg-tertiary); color: var(--text-primary); }

.btn-sm { padding: var(--space-2) var(--space-4); font-size: var(--text-sm); }
.btn-md { padding: var(--space-3) var(--space-6); font-size: var(--text-base); }
.btn-lg { padding: var(--space-4) var(--space-8); font-size: var(--text-lg); }

/* CARDS */
.card { background: var(--bg-primary); border-radius: var(--radius-xl); padding: var(--space-6); box-shadow: var(--shadow-md); transition: all var(--duration-base) var(--ease-out); }
.card:hover { box-shadow: var(--shadow-lg); transform: translateY(-4px); }
.card-elevated { box-shadow: var(--shadow-lg); }
.card-bordered { border: 1px solid var(--border-light); box-shadow: var(--shadow-sm); }

/* BADGES */
.badge { display: inline-flex; align-items: center; gap: var(--space-1); padding: var(--space-1) var(--space-3); font-size: var(--text-xs); font-weight: var(--font-semibold); border-radius: var(--radius-full); white-space: nowrap }
.badge-primary { background: var(--gradient-primary); color: var(--text-inverse); }
.badge-success { background: var(--color-success-50); color: var(--color-success-600); }
.badge-warning { background: var(--color-warning-50); color: var(--color-warning-600); }
.badge-danger { background: var(--color-danger-50); color: var(--color-danger-600); }
.badge-outline { background: transparent; border: 2px solid currentColor; }

/* INPUTS */
.input { width:100%; padding: var(--space-3) var(--space-4); font-size: var(--text-base); color: var(--text-primary); background: var(--bg-primary); border: 2px solid var(--border-light); border-radius: var(--radius-lg); transition: all var(--duration-base) var(--ease-out); }
.input:focus { outline:none; border-color: var(--accent-secondary); box-shadow: 0 10px 30px rgba(var(--accent-secondary-rgba),0.12); transform: translateY(-1px); }
.input:hover { border-color: var(--border-medium); }
.input::placeholder { color: var(--text-tertiary); }

/* NAV */
.nav { display:flex; gap:var(--space-4); align-items:center }
.nav-link { color: var(--text-secondary); text-decoration:none }
.nav-link-active { background: transparent; -webkit-background-clip: text; background-clip: text; color: transparent }

/* Enhanced nav link styles: hover lift and animated gradient underline */
.nav-link {
  position: relative;
  display: inline-block;
  padding-bottom: 6px;
  transition: color var(--duration-base) var(--ease-in-out), transform var(--duration-base) var(--ease-in-out);
  color: var(--text-secondary);
}
.nav-link:hover {
  transform: translateY(-3px);
  color: var(--accent-secondary);
  text-decoration: underline;
  text-underline-offset: 4px;
  text-decoration-thickness: 2px;
}
.nav-link:focus, .nav-link:focus-visible {
  outline: none;
  box-shadow: 0 8px 28px rgba(var(--accent-secondary-rgba),0.12);
  border-radius: 8px;
}
.nav-link:focus,
.nav-link:focus-visible {
  outline: none;
  transform: translateY(-3px);
  color: var(--text-primary);
  box-shadow: 0 6px 18px rgba(59,130,246,0.12);
  border-radius: 8px;
}

/* Active via aria-current attribute for better accessibility */
.nav-link[aria-current="page"] {
  font-weight: var(--font-semibold);
  color: transparent;
  background-image: var(--gradient-primary);
  -webkit-background-clip: text;
  background-clip: text;
}
.nav-link::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: -6px;
  height: 3px;
  border-radius: 4px;
  background-image: var(--gradient-primary);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.35s var(--ease-in-out), opacity 0.35s var(--ease-in-out);
  opacity: 0;
}
.nav-link:hover::after { transform: scaleX(1); opacity: 1; }
.nav-link-active { font-weight: var(--font-semibold); color: transparent; background-image: var(--gradient-primary); -webkit-background-clip: text; background-clip: text; }
.nav-link-active::after { transform: scaleX(1); opacity: 1; }

/* Ensure icons inside nav links respond to hover/focus */
.nav-link svg {
  transition: color var(--duration-base) var(--ease-in-out), transform var(--duration-base) var(--ease-in-out);
  color: var(--color-gray-500, #6b7280);
}
.nav-link:hover svg,
.nav-link:focus svg,
.nav-link[aria-current="page"] svg {
  color: var(--text-primary);
  transform: translateY(-2px);
}

/* Dark mode overrides for navigation to ensure text is visible */
.dark .nav-link {
  color: rgba(255,255,255,0.9);
}
.dark .nav-link:hover {
  color: #ffffff;
}
.dark .nav-link::after {
  background-image: var(--gradient-primary);
}
.dark .nav-link-active {
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.dark .nav-link-active::after { transform: scaleX(1); opacity: 1; }

/* Reusable accent helper classes */
.hover-accent {
  transition: all var(--duration-accent) var(--ease-in-out);
}
.hover-accent:hover {
  color: var(--accent-secondary) !important;
  box-shadow: 0 8px 24px rgba(var(--accent-secondary-rgba),0.08);
}
.focus-ring-accent:focus, .focus-ring-accent:focus-visible {
  outline: none;
  box-shadow: 0 10px 30px rgba(var(--accent-secondary-rgba),0.14), 0 0 0 4px rgba(var(--accent-secondary-rgba),0.06);
  border-radius: 8px;
}

/* Card accent for clickable containers */
.card.card-accent {
  transition: transform var(--duration-accent) var(--ease-out), box-shadow var(--duration-accent) var(--ease-out), border-color var(--duration-accent) var(--ease-out);
}
.card.card-accent:hover, .card.card-accent:focus-within {
  transform: translateY(-3px);
  box-shadow: 0 18px 40px rgba(var(--accent-secondary-rgba),0.08);
  border: 1px solid rgba(var(--accent-secondary-rgba),0.12);
}

/* Links pointer and focus */
a, a.button-link { cursor: pointer; }
a:focus, a:focus-visible { box-shadow: 0 8px 24px rgba(var(--accent-secondary-rgba),0.10); border-radius: 6px; }

/* RTL (Arabic) adjustments: increase button spacing and improve layout breathing */
html[dir="rtl"] {
  /* increase global horizontal gaps for inline groups */
}

html[dir="rtl"] .flex.items-center > * + *,
html[dir="rtl"] .flex.justify-between > * + * {
  margin-inline-start: var(--space-6) !important;
}

/* Make button groups more spacious */
html[dir="rtl"] .btn,
html[dir="rtl"] .btn-base,
html[dir="rtl"] button,
html[dir="rtl"] a.btn {
  padding-left: calc(var(--space-4) + 8px) !important;
  padding-right: calc(var(--space-4) + 8px) !important;
}

/* Forms and selects: increase vertical rhythm in RTL */
html[dir="rtl"] .space-y-4 > * + * {
  margin-top: calc(var(--space-4) * 1.5) !important;
}

/* Align text for typical left-aligned utilities when RTL */
html[dir="rtl"] .text-left { text-align: right !important; }
html[dir="rtl"] .text-right { text-align: left !important; }

/* Global RTL flips for common layout utilities to ensure platform-wide RTL support */
html[dir="rtl"] {
  direction: rtl;
}

/* Swap auto margins used to push elements to one side */
html[dir="rtl"] .ml-auto { margin-left: 0 !important; margin-right: auto !important; }
html[dir="rtl"] .mr-auto { margin-right: 0 !important; margin-left: auto !important; }

/* Reverse common flex rows where 'justify-between' is used for header-like layouts */
html[dir="rtl"] .flex.items-center.justify-between {
  flex-direction: row-reverse;
}

/* Flip horizontal paddings for a few common spacing utilities used in components */
html[dir="rtl"] .px-4 { padding-left: var(--space-4) !important; padding-right: var(--space-4) !important; }
html[dir="rtl"] .pl-4 { padding-right: var(--space-4) !important; padding-left: 0 !important; }
html[dir="rtl"] .pr-4 { padding-left: var(--space-4) !important; padding-right: 0 !important; }

/* Ensure badges, pills and small inline elements keep readable spacing */
html[dir="rtl"] .badge { direction: rtl; }

/* Navbar specific: keep logo left (visually) by ordering, links center, icons right
   We reverse the header row above; logo can be forced to the start visually if needed via order. */
html[dir="rtl"] .navbar-logo { order: 1; }
html[dir="rtl"] .navbar-center { order: 2; }
html[dir="rtl"] .navbar-icons { order: 3; }

/* Quick global hover & focus affordances (fast visual feedback) */
a:hover, button:hover, .btn-base:hover, .btn:hover {
  filter: brightness(1.03);
  transform: translateY(-2px);
}

/* Strong visible focus ring for keyboard users */
a:focus, a:focus-visible, button:focus, button:focus-visible, .btn-base:focus, .btn-base:focus-visible, .btn:focus, .btn:focus-visible {
  outline: 3px solid rgba(59,130,246,0.18);
  outline-offset: 3px;
  box-shadow: 0 8px 24px rgba(59,130,246,0.08);
  border-radius: 8px;
}

/* Inputs get a subtle lift and shadow on focus (complements existing .input:focus) */
input:focus, textarea:focus, select:focus {
  transform: translateY(-1px);
  box-shadow: 0 8px 30px rgba(59,130,246,0.06);
}

/* Ensure mobile menu buttons are obvious when focused */
.md\:hidden button:focus, .md\:hidden button:focus-visible {
  outline: 3px solid rgba(59,130,246,0.16);
  outline-offset: 2px;
}



/* PROGRESS */
.progress { height:8px; background: var(--color-gray-200); border-radius:10px; overflow:hidden }
.progress__fill { height:100%; width:0%; transition: width 1s ease, background 0.5s ease }

/* Cards clickable/interactive */
.card.interactive, .card:hover, .card:focus-within {
  transition: transform var(--duration-base) var(--ease-out), box-shadow var(--duration-base) var(--ease-out), opacity var(--duration-base) var(--ease-out);
}
.card.interactive:hover, .card:focus-within {
  transform: translateY(-6px);
  box-shadow: var(--shadow-lg);
}
